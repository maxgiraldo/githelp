<section data-ng-controller="UserController" data-ng-init="findOne()" ui-view>
  <section data-ng-include="'views/partials/navbar.html'"></section>

  <div class="container profile">
    <div>
      <img class='avatar-lg' src='{{user.github.avatar_url}}'>
    </div>
    <div class='profile-name-info'>
      <h1 class='headline full-name'>{{user.fullName}}</h1>
      <h2 class='username'><a href="http://www.github.com/{{user.userName}}"><i class="fa fa-github"></i> {{user.userName}}</a></h2>
      <h2 data-ng-show = "user.github.blog" class="username"><a href="{{user.github.blog}}"><i class="fa fa-link"></i> {{user.github.blog}}</a></h2>

      <!-- See this only when you visit your own profile -->
      <h4 class='price'><edit-in-place value="user.ppm"></edit-in-place></h4>
      <h4 class='price'>${{user.ppm * 60}}/hour</h4>
    </div>

    <div data-ng-click="setAppointment()" data-ng-show="user && user._id !== global.user._id && user.balancedBank" class='call-button headline'>
      <p>Set up a call</p>
    </div>
    <div data-ng-hide="user">
      <h1>This user does not yet have an account</h1>
    </div>
    <div data-ng-show="user && !user.balancedBank && user._id !== global.user._id" class='no-account-button headline'>
      <p>Cannot accept calls yet!</p>
    </div>
    <div data-ng-show="user && !user.balancedBank && user._id == global.user._id" class='setup-button headline' data-ng-controller="ModalController" data-ng-click="openAccountModal()">
      <p>Start Accepting Calls!</p>
    </div>
    <!-- User's public repos -->
    <p data-ng-show="repoList.length > 0" class='caps-sub-header'>{{user.github.public_repos.length}} public repositories</p>
    <!-- <div ng-repeat="repo in repos"> -->
    <div>
      <ul class='repo-links'>
        <li data-ng-repeat="repo in repoList" data-ng-show="!repo.fork"><a href="/#!/{{userName}}/repos/{{repo.name}}">{{repo.name}}</a></li>
      </ul>
    </div>
    <p data-ng-show="conList.length > 0" class='caps-sub-header'>top {{conList.length}} repositories contributed to</p>

    <!-- User's top contributions -->
    <div>
      <ul class='repo-links'>
        <li data-ng-repeat="repo in conList"><a href="/#!/{{repoAuthor(repo)}}/repos/{{repoName(repo)}}">{{repoName(repo)}}</a></li>
      </ul>
    </div>
    <div>
      <p class='caps-sub-header'>Number of Gists: {{user.github.public_gists}}</p>
      <p data-ng-show="user.email" class='caps-sub-header'>Email: {{user.email}}</p>
      <p class='caps-sub-header'>Followers: {{user.github.followers}}</p>
    </div>
  </div>
</section>
